pipeline{
    agent any
    stages
    {
    stage('scm checkout') 
    {
    steps{ git 'https://github.com/yogesh18-github/maven-project'} 
    }
        stage('execute')
    {steps {withMaven(globalMavenSettingsConfig: '--- Use system default settings or file path ---', jdk: 'JAVA_HOME', maven: 'MAVEN_HOME', mavenSettingsConfig: '--- Use system default settings or file path ---')}
    { sh 'mvn clean package'}
	}
	
	stage('Docker building-code')
  {
  steps{sh 'docker build -t yogeshatale/mywebapp:01 .'}
  }
	stage('Docker image to repo')
	
	{
  steps{withDockerRegistry(credentialsId: 'Dockerhub', url: 'https://index.docker.io/v1/') 
  { sh 'docker push yogeshatale/mywebapp:01'}
	}
  }
	
	}
        
}
